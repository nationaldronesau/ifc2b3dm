# IFC2B3DM

The converter is designed to ultimately convert an IFC file to B3DM to enable object selection and BIM (Building Information Management) in Cesium.

## Architecture
The converter uses the following architecture as can be seen from the diagram:

<p align="center"><img src="figures/architecture.jpg"/></p>

BimServer is used to break an IFC file into its constituent components. The json file of a model (generated by the BimViews plugin for BimServer) is used to query the server for all components of an IFC model.

Each IFC file is then converted to OBJ using IfcConvert and then to GLTF using obj2gltf. Finally, 3d-tiles-tools sample generator has been modified to generate a b3dm file with a batch table hierarchy from the gltfs and json (straming) files, compatible with Cesium. The links to each of these tools can be found in the credits.

## Setup
There are two separate projects within this repository, the IFC2GLTF stage and the GLFT2B3DM stage. These both require different setups, and further details are included in a readme file in both of these folders. After the setup and configuration for both of these projects has been completed, the shell script named compile.sh can be used to generate a model based on the configuration options used in the setup. 

This project currently on works on Windows. 

## Requisites
NodeJS, npm, Java

# Credits

This repository was originally created at CSDILA (Centre for Spatial Data Infrastructres and Land Administration) at the University of Melbourne. The original repository is available here:

https://github.com/Erfan-Shooraj/ifc2b3dm

The following open-source tools have been used in the scripts:

--BimServer API: 

https://github.com/opensourceBIM/BIMserver

--IfcOpenShell IFC2X3 IfcConvert 0.5.0-dev: 

http://ifcopenshell.org/ifcconvert.html

https://github.com/IfcOpenShell/IfcOpenShell
                                            
--obj2gltf: 

https://github.com/AnalyticalGraphicsInc/obj2gltf

--3d-tiles-tools sample generator: 

https://github.com/AnalyticalGraphicsInc/3d-tiles-tools

